#!/usr/bin/env bash
# Script that configures /etc/hosts so that:
#   - localhost resolves to 127.0.0.2
#   - facebook.com resolves to 8.8.8.8

# Exit on error
set -e

# Must be run as root
if [ "$(id -u)" -ne 0 ]; then
  echo "This script must be run as root." >&2
  exit 1
fi

# Backup the original hosts file
cp /etc/hosts /etc/hosts.bak

# Remove any existing lines with "localhost" or "facebook.com" at the end
sed -i '/[[:space:]]localhost$/d' /etc/hosts
sed -i '/[[:space:]]facebook\.com$/d' /etc/hosts

# Add the new entries
echo "127.0.0.2 localhost" >> /etc/hosts
echo "8.8.8.8 facebook.com" >> /etc/hosts
